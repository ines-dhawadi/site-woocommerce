(window.webpackJsonp=window.webpackJsonp||[]).push([[153],{553:function(t,e,n){"use strict";var r=n(107),a=n.n(r),i=n(108),o=n.n(i),c=n(528),s=n.n(c),u=n(527),l=n.n(u),p=n(531),d=n.n(p),m=n(529),f=n.n(m),h=n(34),g=n.n(h),v=n(12),b=n.n(v),y=n(10),O=n.n(y),_=n(526),N=n.n(_),j=n(1),E=n(35),A=n(534),w=n.n(A),D=n(564),C=function(t){function e(){var t,n;a()(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=s()(this,(t=l()(e)).call.apply(t,[this].concat(i))),g()(d()(n),"dismissTimeout",null),n}return f()(e,t),o()(e,[{key:"componentDidMount",value:function(){this.props.duration>0&&(this.dismissTimeout=setTimeout(this.props.onDismissClick,this.props.duration))}},{key:"componentWillUnmount",value:function(){this.dismissTimeout&&clearTimeout(this.dismissTimeout)}},{key:"componentDidUpdate",value:function(){clearTimeout(this.dismissTimeout),this.props.duration>0&&(this.dismissTimeout=setTimeout(this.props.onDismissClick,this.props.duration))}},{key:"getIcon",value:function(){var t;switch(this.props.status){case"is-info":t="info";break;case"is-success":t="checkmark";break;case"is-error":case"is-warning":t="notice";break;default:t="info"}return t}},{key:"render",value:function(){var t=this.props,e=t.children,n=t.className,r=t.icon,a=t.isCompact,i=t.isLoading,o=t.onDismissClick,c=t.showDismiss,s=void 0===c?!a:c,u=t.status,l=t.text,p=t.translate,d=N()("notice",u,n,{"is-compact":a,"is-loading":i,"is-dismissable":s});return O.a.createElement("div",{className:d},O.a.createElement("span",{className:"notice__icon-wrapper"},O.a.createElement(w.a,{className:"notice__icon",icon:r||this.getIcon(),size:24})),O.a.createElement("span",{className:"notice__content"},O.a.createElement("span",{className:"notice__text"},l||e)),l?e:null,s&&O.a.createElement("span",{tabIndex:"0",className:"notice__dismiss",onClick:o},O.a.createElement(w.a,{icon:"cross",size:24}),O.a.createElement(D.a,null,p("Dismiss"))))}}]),e}(y.Component);g()(C,"defaultProps",{className:"",duration:0,icon:null,isCompact:!1,isLoading:!1,onDismissClick:j.noop,status:null,text:null}),g()(C,"propTypes",{className:b.a.string,duration:b.a.number,icon:b.a.string,isCompact:b.a.bool,isLoading:b.a.bool,onDismissClick:b.a.func,showDismiss:b.a.bool,status:b.a.oneOf(["is-error","is-info","is-success","is-warning","is-plain"]),text:b.a.oneOfType([b.a.arrayOf(b.a.oneOfType([b.a.string,b.a.node])),b.a.oneOfType([b.a.string,b.a.node])]),translate:b.a.func.isRequired}),e.a=Object(E.localize)(C)},564:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(10),a=n.n(r);n(577);function i(t){var e=t.children;return a.a.createElement("span",{className:"screen-reader-text"},e)}},577:function(t,e,n){},650:function(t,e){t.exports=function(t){return t&&t.__esModule?t:{default:t}}},773:function(t,e,n){},779:function(t,e,n){"use strict";var r=n(650);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=a.default.parse(t,!0,!0),r="https:"===n.protocol;delete n.protocol,delete n.auth,delete n.port;var u={slashes:!0,protocol:"https:",query:{}};if(p=n.host,/^i[0-2]\.wp\.com$/.test(p))u.pathname=n.pathname,u.hostname=n.hostname;else{if(n.search)return null;var l=a.default.format(n);u.pathname=0===l.indexOf("//")?l.substring(1):l,u.hostname=function(t){var e=(0,i.default)(t),n=(0,o.default)(e),r="i"+Math.floor(3*n());return c('determined server "%s" to use with "%s"',r,t),r+".wp.com"}(u.pathname),r&&(u.query.ssl=1)}var p;if(e)for(var d in e)"host"!==d&&"hostname"!==d?"secure"!==d||e[d]?u.query[s[d]||d]=e[d]:u.protocol="http:":u.hostname=e[d];var m=a.default.format(u);return c("generated Photon URL: %s",m),m};var a=r(n(648)),i=r(n(780)),o=r(n(781)),c=(0,r(n(47)).default)("photon"),s={width:"w",height:"h",letterboxing:"lb",removeLetterboxing:"ulb"}},780:function(t,e){!function(){"use strict";var e=[],n=3988292384;function r(t){var e,r,a,i,o=-1;for(e=0,a=t.length;e<a;e+=1){for(i=255&(o^t[e]),r=0;r<8;r+=1)1===(1&i)?i=i>>>1^n:i>>>=1;o=o>>>8^i}return-1^o}function a(t,n){var r,i,o;if("undefined"!==typeof a.crc&&n&&t||(a.crc=-1,t)){for(r=a.crc,i=0,o=t.length;i<o;i+=1)r=r>>>8^e[255&(r^t[i])];return a.crc=r,-1^r}}!function(){var t,r,a;for(r=0;r<256;r+=1){for(t=r,a=0;a<8;a+=1)1&t?t=n^t>>>1:t>>>=1;e[r]=t>>>0}}(),t.exports=function(t,e){var n;t="string"===typeof t?(n=t,Array.prototype.map.call(n,function(t){return t.charCodeAt(0)})):t;return((e?r(t):a(t))>>>0).toString(16)},t.exports.direct=r,t.exports.table=a}()},781:function(t,e,n){"use strict";var r=256,a=[],i=window,o=Math.pow(r,6),c=Math.pow(2,52),s=2*c,u=r-1,l=Math.random;function p(t){var e,n=t.length,a=this,i=0,o=a.i=a.j=0,c=a.S=[];for(n||(t=[n++]);i<r;)c[i]=i++;for(i=0;i<r;i++)c[i]=c[o=u&o+t[i%n]+(e=c[i])],c[o]=e;(a.g=function(t){for(var e,n=0,i=a.i,o=a.j,c=a.S;t--;)e=c[i=u&i+1],n=n*r+c[u&(c[i]=c[o=u&o+e])+(c[o]=e)];return a.i=i,a.j=o,n})(r)}function d(t,e){for(var n,r=t+"",a=0;a<r.length;)e[u&a]=u&(n^=19*e[u&a])+r.charCodeAt(a++);return m(e)}function m(t){return String.fromCharCode.apply(0,t)}t.exports=function(e,n){if(n&&!0===n.global)return n.global=!1,Math.random=t.exports(e,n),n.global=!0,Math.random;var u=[],l=(d(function t(e,n){var r,a=[],i=(typeof e)[0];if(n&&"o"==i)for(r in e)try{a.push(t(e[r],n-1))}catch(o){}return a.length?a:"s"==i?e:e+"\0"}(n&&n.entropy||!1?[e,m(a)]:0 in arguments?e:function(t){try{return i.crypto.getRandomValues(t=new Uint8Array(r)),m(t)}catch(e){return[+new Date,i,i.navigator&&i.navigator.plugins,i.screen,m(a)]}}(),3),u),new p(u));return d(m(l.S),a),function(){for(var t=l.g(6),e=o,n=0;t<c;)t=(t+n)*r,e*=r,n=l.g(1);for(;t>=s;)t/=2,e/=2,n>>>=1;return(t+n)/e}},t.exports.resetGlobal=function(){Math.random=l},d(Math.random(),a)},794:function(t,e,n){"use strict";n.r(e);var r=n(10),a=n.n(r),i=(n(773),n(107)),o=n.n(i),c=n(108),s=n.n(c),u=n(528),l=n.n(u),p=n(527),d=n.n(p),m=n(531),f=n.n(m),h=n(529),g=n.n(h),v=n(34),b=n.n(v),y=n(109),O=n(35),_=function(t){window.location.reload(!0),t({type:"STRIPE_CONNECT_ACCOUNT_RELOAD_PAGE"})},N=n(1),j=n(12),E=n.n(j),A=n(542),w=n(530),D=n.n(w),C=n(533),I=n.n(C),z=n(526),U=n.n(z),k=function(t){function e(){var t,n;o()(this,e);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=l()(this,(t=d()(e)).call.apply(t,[this].concat(a))),b()(f()(n),"state",{isError:!1}),b()(f()(n),"handleError",function(){n.setState({isError:!0})}),n}return g()(e,t),s()(e,[{key:"componentWillReceiveProps",value:function(t){t.src!==this.props.src&&this.setState({isError:!1})}},{key:"render",value:function(){var t=this.props,e=t.className,n=I()(t,["className"]),r=U()(e,{image:!0,"is-error":this.state.isError});return a.a.createElement("img",D()({onError:this.handleError,className:r},n))}}]),e}(r.Component);b()(k,"defaultProps",{className:""});var R,T=n(648),x=n(779),S=n.n(x);R="object"===typeof location?new RegExp("^(/(?!/)|data:image/[^;]+;|blob:".concat(location.origin,"/)")):/^(\/(?!\/)|data:image\/[^;]+;)/;var L=/^([-a-zA-Z0-9_]+\.)*(gravatar\.com|wordpress\.com|wp\.com|a8c\.com)$/;var q=/^https?:$/,M=Object(N.get)(window,"devicePixelRatio",1)>1?2:1,P=["w","h","resize","fit","s"],W={photon:/(^[is]\d\.wp\.com|(^|\.)wordpress\.com)$/,gravatar:/(^|\.)gravatar\.com$/},V=function(t){return t*M};function $(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if("string"!==typeof t)return t;var a=Object(T.parse)(t,!0,!0);if(!q.test(a.protocol))return t;if(!a.hostname)return t;a.query=Object(N.omit)(a.query,P);var i=Object(N.findKey)(W,String.prototype.match.bind(a.hostname));return"number"===typeof e&&(e="gravatar"===i?{s:e}:n>0?{fit:[e,n].join()}:{w:e}),!i&&r?$(function(t){if("string"!==typeof t)return null;if(R.test(t))return t;var e=Object(T.parse)(t,!1,!0),n=e.hostname,r=e.path,a=e.query;return L.test(n)?t.replace(/^http:/,"https:"):a&&a.length>0?null:Object(N.endsWith)(r,".svg")?null:S()(t)}(t),e,null,!1):(Object(N.assign)(a.query,Object(N.mapValues)(e,function(t,e){return"resize"===e||"fit"===e?t.split(",").map(V).join(","):Object(N.includes)(P,e)?V(t):t})),delete a.search,Object(T.format)(a))}var G=function(t){function e(){var t,n;o()(this,e);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return n=l()(this,(t=d()(e)).call.apply(t,[this].concat(i))),b()(f()(n),"renderLogo",function(){var t=n.props.stripeConnectAccount.logo,e=null;return Object(N.isEmpty)(t)||(e=a.a.createElement(k,{src:$(t,{w:40,h:40}),className:"stripe__connect-account-logo"})),a.a.createElement("div",{className:"stripe__connect-account-logo-container"},e)}),b()(f()(n),"renderNameAndEmail",function(){var t=n.props.stripeConnectAccount,e=t.displayName,r=t.email,i=t.firstName,o=t.lastName,c=Object(N.isEmpty)(e)?"".concat(i," ").concat(o):e;return a.a.createElement("div",{className:"stripe__connect-account-details"},a.a.createElement("span",{className:"stripe__connect-account-name"},a.a.createElement("span",{className:"stripe__connect-account-name"},c),a.a.createElement("span",{className:"stripe__connect-account-email"},r)))}),b()(f()(n),"onDeauthorize",function(t){t.preventDefault(),n.props.onDeauthorize()}),b()(f()(n),"renderStatus",function(){var t=n.props,e=t.isDeauthorizing,r=t.stripeConnectAccount,i=t.translate,o=null,c=null;return o=r.isActivated?a.a.createElement("span",{className:"stripe__connect-account-status account-activated"},i("Activated")):a.a.createElement("span",{className:"stripe__connect-account-status account-not-activated"},i("Check email to activate account")),c=e?a.a.createElement("span",{className:"stripe__connect-account-disconnect"},i("Disconnecting")):a.a.createElement(A.a,{borderless:!0,className:"stripe__connect-account-disconnect",onClick:n.onDeauthorize},i("Disconnect")),a.a.createElement("div",null,o,c)}),b()(f()(n),"render",function(){var t=n.props.translate;return a.a.createElement("div",{className:"stripe__connect-account"},a.a.createElement("h3",{className:"stripe__connect-account-heading"},t("Stripe account")),a.a.createElement("div",{className:"stripe__connect-account-body"},n.renderLogo(),a.a.createElement("div",{className:"stripe__connect-account-details"},n.renderNameAndEmail(),n.renderStatus())))}),n}return g()(e,t),e}(r.Component);b()(G,"propTypes",{stripeConnectAccount:E.a.shape({displayName:E.a.string,email:E.a.string,firstName:E.a.string,isActivated:E.a.bool,lastName:E.a.string,logo:E.a.string}),isDeauthorizing:E.a.bool.isRequired,onDeauthorize:E.a.func.isRequired});var X=Object(O.localize)(G),J=n(553),K=n(532),Y=function(t,e){return Object(N.get)(t,["extensions","woocommerce","sites",e,"settings","stripeConnectAccount"],{})};function Z(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(K.a)(t);return Object(N.get)(Y(t,e),["error"],"")}function F(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(K.a)(t);return Object(N.get)(Y(t,e),["isDeauthorizing"],!1)}function B(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(K.a)(t);return Object(N.get)(Y(t,e),["oauthUrl"],"")}function H(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(K.a)(t);return Object(N.get)(Y(t,e),["isRequesting"],!1)}var Q=n(535),tt=n(561),et=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return function(r,a){var i=a();t||(t=Object(K.a)(i));var o={type:Q.W,siteId:t};return r(o),Object(tt.a)(t).get("connect/stripe/account","wc/v1").then(function(n){r(function(t,e,n){var r=n.account_id,a=n.display_name,i=n.email,o=n.business_logo,c=n.legal_entity,s=n.payouts_enabled;return{type:Q.X,connectedUserID:r,displayName:a,email:i,firstName:c.first_name,isActivated:s,logo:o,lastName:c.last_name,siteId:t}}(t,0,n)),e&&r(e(t,o,n))}).catch(function(e){r(function(t,e,n){var r=n.message;return{type:Q.X,error:r,siteId:t}}(t,0,e)),n&&r(n(e))})}};var nt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return function(r,a){var i=a();t||(t=Object(K.a)(i));var o={type:Q.U,siteId:t};return r(o),Object(tt.a)(t).post("connect/stripe/account/deauthorize",{},"wc/v1").then(function(n){r(function(t,e,n){return{type:Q.V,siteId:t}}(t)),e&&r(e(t,o,n))}).catch(function(e){r(function(t,e,n){return{type:Q.V,error:n,siteId:t}}(t,0,e)),n&&r(n(e))})}};var rt=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return function(a,i){var o=i();t||(t=Object(K.a)(o));var c={type:Q.ab,returnUrl:e,siteId:t};return a(c),Object(tt.a)(t).post("connect/stripe/oauth/init",{returnUrl:e},"wc/v1").then(function(e){a(function(t,e,n){var r=n.oauthUrl;return{type:Q.bb,oauthUrl:r,siteId:t}}(t,0,e)),n&&a(n(t,c,e))}).catch(function(e){a(function(t,e,n){var r=n.message;return{type:Q.bb,error:r,siteId:t}}(t,0,e)),r&&a(r(t,c,e))})}};var at,it=function(t){function e(){var t,n;o()(this,e);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=l()(this,(t=d()(e)).call.apply(t,[this].concat(a))),b()(f()(n),"onDeauthorize",function(){var t=n.props.siteId;n.props.deauthorizeAccount(t)}),n}return g()(e,t),s()(e,[{key:"componentDidMount",value:function(){var t=this.props.siteId;this.props.fetchAccountDetails(t)}},{key:"componentDidUpdate",value:function(t){var e=this.props,n=e.siteId,r=e.isLoading,a=e.connectedUserID,i=e.oauthURL,o=e.isOAuthInitializing,c=e.stripeError,s=!o&&t.isOAuthInitializing&&c;r||!t.isLoading||a||i||s||this.props.oauthInit(n)}},{key:"render",value:function(){var t=this.props,e=t.isLoading,n=t.stripeConnectAccount,r=t.stripeError,i=t.isDeauthorizing,o=t.isReloading,c=t.oauthURL,s=t.translate;return e?a.a.createElement("div",{className:"stripe-connect-account__placeholder-container"},a.a.createElement("div",{className:"stripe-connect-account__placeholder-body"})):o?a.a.createElement(J.a,{showDismiss:!1,isCompact:!0,isLoading:!0},s("Account disconnected. Reloading page\u2026")):c?s("You\u2019ve got WooCommerce Tax installed. If you\u2019d like, we can automatically copy keys from your Stripe account for you. {{a}}Click here{{/a}} to connect your Stripe account using WooCommerce Tax.",{components:{a:a.a.createElement("a",{href:c})}}):r||a.a.createElement(X,{stripeConnectAccount:n,isDeauthorizing:i,onDeauthorize:this.onDeauthorize})}}]),e}(r.Component),ot=Object(y.b)(function(t){var e=Object(K.a)(t),n=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(K.a)(t),n=Y(t,e);return Object(N.omit)(n,["error","isDeauthorizing","isOAuthConnecting","isOAuthInitializing","isRequesting","oauthUrl","notifyCompleted"])}(t,e),r=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(K.a)(t);return Object(N.get)(Y(t,e),["isOAuthInitializing"],!1)}(t,e);return{siteId:e,isLoading:H(t,e)||r,isOAuthInitializing:r,stripeConnectAccount:n,stripeError:Z(t,e),connectedUserID:n.connectedUserID,isDeauthorizing:F(t,e),isReloading:t.isReloading,oauthURL:B(t,e)}},function(t){return{fetchAccountDetails:function(e){return t(et(e))},deauthorizeAccount:function(e){t(nt(e)).then(function(){t(_)})},oauthInit:function(e){return t(rt(e))}}})(Object(O.localize)(it)),ct=n(46);var st=Object(ct.b)(null,(at={},b()(at,Q.S,function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({},t,{notifyCompleted:!1})}),b()(at,Q.T,function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({},t,{error:""})}),b()(at,Q.U,function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({},t,{isDeauthorizing:!0})}),b()(at,Q.V,function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return Object.assign({},t,{connectedUserID:"",displayName:"",email:"",error:e.error||"",firstName:"",isActivated:!1,isDeauthorizing:!1,isRequesting:!1,lastName:"",logo:""})}),b()(at,Q.W,function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({},t,{connectedUserID:"",displayName:"",email:"",error:"",firstName:"",isActivated:!1,isDeauthorizing:!1,isRequesting:!0,lastName:"",logo:""})}),b()(at,Q.X,function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return Object.assign({},t,{connectedUserID:e.connectedUserID||"",displayName:e.displayName||"",email:e.email||"",error:e.error||"",firstName:e.firstName||"",isActivated:e.isActivated||!1,isDeauthorizing:!1,isRequesting:!1,lastName:e.lastName||"",logo:e.logo||""})}),b()(at,Q.ab,function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({},t,{isOAuthInitializing:!0,oauthUrl:""})}),b()(at,Q.bb,function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return Object.assign({},t,{isOAuthInitializing:!1,error:e.error||"",oauthUrl:e.oauthUrl||""})}),b()(at,Q.Y,function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({},t,{error:"",isOAuthConnecting:!0,notifyCompleted:!1})}),b()(at,Q.Z,function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return Object.assign({},t,{connectedUserID:e.connectedUserID||"",email:"",error:e.error||"",firstName:"",isActivated:!1,isCreating:!1,isOAuthConnecting:!1,isRequesting:!1,lastName:"",logo:"",notifyCompleted:!0})}),at));e.default=function(){return{getReducer:function(){return Object(ct.a)({extensions:Object(ct.a)({woocommerce:Object(ct.a)({sites:Object(ct.a)({1:Object(ct.a)({settings:Object(ct.a)({stripeConnectAccount:st})})})})}),ui:function(){return{selectedSiteId:1}},isReloading:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=(arguments.length>1?arguments[1]:void 0).type;return t||"STRIPE_CONNECT_ACCOUNT_RELOAD_PAGE"===e}})},getInitialState:function(){return{}},getStateForPersisting:function(){return null},getStateKey:function(){return"wcs-stripe-connect-account"},View:function(){return a.a.createElement(ot,null)}}}}}]);